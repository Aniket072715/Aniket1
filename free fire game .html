<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Battle — HTML5 (FreeFire-inspired)</title>
  <style>
    :root{--bg:#0f1724;--panel:#0b1220;--accent:#ef4444}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#081126 0%, #0b1726 100%);font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    .wrap{display:flex;gap:12px;align-items:flex-start;padding:14px}
    canvas{background:linear-gradient(#08314a,#01202b);border-radius:10px;box-shadow:0 6px 24px rgba(2,6,23,.6)}
    .panel{width:300px;padding:12px;background:var(--panel);color:#dce7f1;border-radius:10px}
    h1{margin:6px 0 12px;font-size:18px}
    .row{display:flex;justify-content:space-between;margin:6px 0}
    button{background:var(--accent);border:none;color:white;padding:8px 10px;border-radius:8px;cursor:pointer}
    small{color:#9fb0c8}
    .controls{font-size:13px}
    .credit{font-size:12px;color:#93a7bd;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="game" width="900" height="560"></canvas>
    <div class="panel">
      <h1>Mini Battle — Demo</h1>
      <div class="row"><div>Health</div><div id="hp">100</div></div>
      <div class="row"><div>Kills</div><div id="kills">0</div></div>
      <div class="row"><div>Ammo</div><div id="ammo">30</div></div>
      <div class="row"><div>Enemies</div><div id="enemies">0</div></div>
      <div style="margin-top:12px" class="controls">
        <div><strong>Controls</strong></div>
        <div>Move: W A S D or ↑ ← ↓ →</div>
        <div>Aim: Mouse</div>
        <div>Shoot: Left click</div>
        <div>Reload: R</div>
      </div>
      <div style="margin-top:12px">
        <button id="restart">Restart</button>
        <button id="toggleAI">Toggle Spawn</button>
      </div>
      <div class="credit">Note: This is an original demo inspired by battle-royale shooters. It uses simple shapes (no copyrighted assets).</div>
    </div>
  </div>

<script>
// Mini Battle — single-file demo
// Author: Generated by assistant
// No copyrighted assets used — shapes only.

const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;

let keys = {};
let mouse = {x: W/2, y: H/2, down:false};
let entities = [];
let bullets = [];
let enemies = [];
let score = 0;
let spawnEnabled = true;

const player = {
  x: W/2, y: H/2, r: 16,
  dir: 0,
  speed: 2.4,
  hp: 100,
  ammo: 30,
  maxAmmo: 30,
  reloadTime: 900, // ms
  reloading: false,
  lastShot: 0,
  fireRate: 160 // ms
};

function hudUpdate(){
  document.getElementById('hp').textContent = Math.max(0, Math.floor(player.hp));
  document.getElementById('kills').textContent = score;
  document.getElementById('ammo').textContent = player.ammo + (player.reloading? ' (reloading)': '');
  document.getElementById('enemies').textContent = enemies.length;
}

// input
window.addEventListener('keydown', e=>{keys[e.key.toLowerCase()] = true});
window.addEventListener('keyup', e=>{keys[e.key.toLowerCase()] = false});
canvas.addEventListener('mousemove', e=>{
  const rect = canvas.getBoundingClientRect();
  mouse.x = e.clientX - rect.left; mouse.y = e.clientY - rect.top;
});
canvas.addEventListener('mousedown', e=>{ if(e.button===0) mouse.down = true; });
canvas.addEventListener('mouseup', e=>{ if(e.button===0) mouse.down = false; });

// buttons
document.getElementById('restart').addEventListener('click', restart);
document.getElementById('toggleAI').addEventListener('click', ()=>{ spawnEnabled = !spawnEnabled; });
window.addEventListener('blur', ()=>{ keys = {}; mouse.down = false; });

function restart(){
  player.x = W/2; player.y = H/2; player.hp = 100; player.ammo = player.maxAmmo; player.reloading = false;
  bullets = []; enemies = []; score = 0; hudUpdate();
}

// helpers
function distance(a,b){ const dx=a.x-b.x, dy=a.y-b.y; return Math.hypot(dx,dy); }
function clamp(v,a,b){ return Math.max(a, Math.min(b,v)); }

// spawn enemies periodically
let lastSpawn = 0;
function spawnEnemy(){
  const edge = Math.floor(Math.random()*4);
  let x,y;
  const pad = 20;
  if(edge===0){ x = Math.random()*W; y = -pad; }
  else if(edge===1){ x = Math.random()*W; y = H+pad; }
  else if(edge===2){ x = -pad; y = Math.random()*H; }
  else { x = W+pad; y = Math.random()*H; }
  enemies.push({x,y,r:12,speed: 0.9 + Math.random()*0.9, hp: 25 + Math.random()*10});
}

// shooting
function shoot(){
  const now = performance.now();
  if(now - player.lastShot < player.fireRate) return;
  if(player.reloading) return;
  if(player.ammo <= 0){ startReload(); return; }
  player.lastShot = now;
  player.ammo--;
  const angle = Math.atan2(mouse.y - player.y, mouse.x - player.x);
  const speed = 8;
  bullets.push({x: player.x + Math.cos(angle)*player.r, y: player.y + Math.sin(angle)*player.r, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed, r:4, life: 1600, owner:'player'});
}

function startReload(){
  if(player.reloading) return;
  player.reloading = true;
  setTimeout(()=>{ player.ammo = player.maxAmmo; player.reloading=false; }, player.reloadTime);
}

// update loop
let lastFrame = performance.now();
function update(){
  const now = performance.now();
  const dt = Math.min(40, now - lastFrame);
  lastFrame = now;

  // player movement
  let vx=0, vy=0;
  if(keys['w']||keys['arrowup']) vy -= 1;
  if(keys['s']||keys['arrowdown']) vy += 1;
  if(keys['a']||keys['arrowleft']) vx -= 1;
  if(keys['d']||keys['arrowright']) vx += 1;
  const len = Math.hypot(vx,vy) || 1;
  player.x += (vx/len) * player.speed * (dt/16);
  player.y += (vy/len) * player.speed * (dt/16);
  player.x = clamp(player.x, player.r, W-player.r);
  player.y = clamp(player.y, player.r, H-player.r);

  // aim dir
  player.dir = Math.atan2(mouse.y - player.y, mouse.x - player.x);

  // shooting
  if(mouse.down) shoot();
  if(keys['r']) startReload();

  // bullets
  for(let i=bullets.length-1;i>=0;i--){
    const b = bullets[i];
    b.x += b.vx*(dt/16); b.y += b.vy*(dt/16);
    b.life -= dt;
    // remove if out of bounds or life ended
    if(b.life <= 0 || b.x < -20 || b.x > W+20 || b.y < -20 || b.y > H+20){ bullets.splice(i,1); continue; }
    // enemy collision
    if(b.owner==='player'){
      for(let j=enemies.length-1;j>=0;j--){
        const e = enemies[j];
        if(distance(b,e) < b.r + e.r){
          e.hp -= 18;
          bullets.splice(i,1);
          if(e.hp <= 0){ enemies.splice(j,1); score++; }
          break;
        }
      }
    }
  }

  // enemies AI
  for(let i=enemies.length-1;i>=0;i--){
    const e = enemies[i];
    const ang = Math.atan2(player.y - e.y, player.x - e.x);
    e.x += Math.cos(ang) * e.speed * (dt/16);
    e.y += Math.sin(ang) * e.speed * (dt/16);
    // collision with player
    if(distance(e, player) < e.r + player.r){
      player.hp -= 8 * (dt/50);
    }
  }

  // spawn
  if(spawnEnabled && now - lastSpawn > 900){ spawnEnemy(); lastSpawn = now; }

  // auto game over if hp <= 0
  if(player.hp <= 0){
    // freeze
    player.hp = 0;
    // stop spawning
    spawnEnabled = false;
  }

  hudUpdate();
}

function draw(){
  ctx.clearRect(0,0,W,H);

  // ground / grid
  ctx.save();
  ctx.globalAlpha = 0.06;
  for(let gx=0;gx<W;gx+=48){ ctx.fillRect(gx,0,1,H); }
  for(let gy=0;gy<H;gy+=48){ ctx.fillRect(0,gy,W,1); }
  ctx.restore();

  // bullets
  for(const b of bullets){
    ctx.beginPath(); ctx.arc(b.x,b.y,b.r,0,Math.PI*2); ctx.fillStyle = '#ffd966'; ctx.fill();
  }

  // enemies
  for(const e of enemies){
    ctx.beginPath(); ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
    ctx.fillStyle = '#ef5350'; ctx.fill();
    // hp bar
    ctx.fillStyle = 'rgba(0,0,0,0.5)'; ctx.fillRect(e.x-16, e.y - e.r - 10, 32, 5);
    ctx.fillStyle = '#4ade80'; ctx.fillRect(e.x-16, e.y - e.r - 10, 32 * clamp(e.hp/40,0,1), 5);
  }

  // player
  ctx.save();
  ctx.translate(player.x, player.y);
  ctx.rotate(player.dir);
  // body
  ctx.beginPath(); ctx.arc(0,0,player.r,0,Math.PI*2); ctx.fillStyle='#60a5fa'; ctx.fill();
  // weapon rectangle
  ctx.fillStyle='#1f2937'; ctx.fillRect(0, -6, player.r + 12, 12);
  ctx.restore();

  // UI overlay when dead
  if(player.hp <= 0){
    ctx.fillStyle = 'rgba(0,0,0,0.45)'; ctx.fillRect(0,0,W,H);
    ctx.fillStyle = '#fff'; ctx.font='28px system-ui'; ctx.textAlign='center'; ctx.fillText('You are eliminated — Press Restart', W/2, H/2);
  }
}

function loop(){ update(); draw(); requestAnimationFrame(loop); }

// start
restart(); lastFrame = performance.now(); loop();
</script>
</body>
</html>
